<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="title" content="Happy Birthday Website 2.0 | Aoudumber Bade">
    <meta name="github" content="https://github.com/Aoudumber-Bade">
    <title>Ritika's Birthday</title>

    <link rel="stylesheet" href="style.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link
        href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500;700&family=Poppins:wght@400;600&display=swap"
        rel="stylesheet">

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

</head>

<body>
    <div id="app">
        <!-- =============== PAGE 1 : MAIN BIRTHDAY PAGE =============== -->
        <div id="page1" class="page page-main">
            <div id="wrapper">
                <div class="flag__birthday">
                    <img src="./images/1.png" alt="" width="350" class="flag__left">
                    <img src="./images/1.png" alt="" width="350" class="flag__right">
                </div>

                <div class="content">
                    <div class="left">
                        <div class="title">
                            <h1 class="happy">
                                <span style="--t: 4s;">H</span>
                                <span style="--t: 4.2s;">a</span>
                                <span style="--t: 4.4s;">p</span>
                                <span style="--t: 4.6s;">p</span>
                                <span style="--t: 4.8s;">y</span>
                            </h1>
                            <h1 class="birthday">
                                <span style="--t: 5s;">B</span>
                                <span style="--t: 5.2s;">i</span>
                                <span style="--t: 5.4s;">r</span>
                                <span style="--t: 5.6s;">t</span>
                                <span style="--t: 5.8s;">h</span>
                                <span style="--t: 6s;">d</span>
                                <span style="--t: 6.2s;">a</span>
                                <span style="--t: 6.4s;">y</span>
                            </h1>
                            <div class="hat">
                                <img src="./images/hat.png" alt="" width="130">
                            </div>
                        </div>

                        <div class="date__of__birth">
                            <span></span>
                        </div>

                        <!-- CHOICES INSTEAD OF SINGLE BUTTON -->
                        <div class="choices">
                            <button id="btnUnlock" class="choice-btn primary-choice">
                                Want to Unlock Message üíå
                            </button>
                            <button id="btnGoodbye" class="choice-btn secondary-choice">
                                Say Goodbye üò¢
                            </button>
                        </div>
                    </div>

                    <div class="right">
                        <div class="box__account">
                            <div class="image">
                                <img src="./images/unnamed.png" alt="">
                            </div>
                            <div class="name">
                                <i class="fa-solid fa-heart"></i>
                                <span>Dear Pavitra</span>
                                <i class="fa-solid fa-heart"></i>
                            </div>
                            <div class="balloon_one">
                                <img width="100px" src="./images/balloon1.png" alt="">
                            </div>
                            <div class="balloon_two">
                                <img width="100px" src="./images/balloon2.png" alt="">
                            </div>
                        </div>
                        <div class="cricle">
                            <div class="text__cricle">
                                <span style="--i: 1;">h</span>
                                <span style="--i: 2;">a</span>
                                <span style="--i: 3;">p</span>
                                <span style="--i: 4;">p</span>
                                <span style="--i: 5;">y</span>
                                <span style="--i: 6;">-</span>
                                <span style="--i: 7;">b</span>
                                <span style="--i: 8;">i</span>
                                <span style="--i: 9;">r</span>
                                <span style="--i: 10;">t</span>
                                <span style="--i: 11;">h</span>
                                <span style="--i: 12;">d</span>
                                <span style="--i: 13;">a</span>
                                <span style="--i: 14;">y</span>
                                <span style="--i: 15;">-</span>
                            </div>
                            <i class="fa-solid fa-heart"></i>
                        </div>
                    </div>
                </div>

                <div class="decorate_star star1" style="--t: 15s;"></div>
                <div class="decorate_star star2" style="--t: 15.2s;"></div>
                <div class="decorate_star star3" style="--t: 15.4s;"></div>
                <div class="decorate_star star4" style="--t: 15.6s;"></div>
                <div class="decorate_star star5" style="--t: 15.8s;"></div>

                <div class="decorate_flower--one" style="--t: 15s;">
                    <img width="20" src="./images/decorate_flower.png" alt="">
                </div>
                <div class="decorate_flower--two" style="--t: 15.3s;">
                    <img width="20" src="./images/decorate_flower.png" alt="">
                </div>
                <div class="decorate_flower--three" style="--t: 15.6s;">
                    <img width="20" src="./images/decorate_flower.png" alt="">
                </div>

                <div class="decorate_bottom">
                    <img src="./images/decorate.png" alt="" width="100">
                </div>

                <div class="smiley__icon">
                    <img src="./images/smiley_icon.png" alt="" width="100">
                </div>

                <!-- LOVE LETTER POPUP (as before) -->
                <div class="boxMail">
                    <i class="fa-solid fa-xmark"></i>
                    <div class="boxMail-container">
                        <div class="card1">
                            <div class="userImg">
                                <img src="images/unnamed.png" alt="">
                            </div>
                            <h4 class="username">To: Pavitra üíñ<span class="underline"></span></h4>

                            <h3>Happy Birthday</h3>
                            <div class="imageCute">
                                <img src="cute1.png" alt="">
                            </div>
                        </div>
                        <div class="card2">
                            <div class="card2-content">
                                <h3>To You!</h3>
                                <h2>Happy birthday ü•≥üéÇü•≥ chanda the day you come into my life I was not really much
                                    attached to
                                    you but day by day you became close to my heart . And now you are truly my younger
                                    sister. I
                                    wish I could remove some of the pain from your life which you are bearing alone. But
                                    you're
                                    always welcome ü§ó you can talk anytime you want to talk specially those which you
                                    can't say
                                    to others. And this year your all dreams come true . I wish that your
                                    brother could wish you but if couldn't wish on him behalf I am wishing you happy
                                    birthday
                                    üéàüéÇüéà sana . Don't be Sad ok be happy üòå
                                </h2>

                                <div class="imageCute2">
                                    <img src="cute2.png" alt="">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div><!-- /#wrapper -->

            <!-- QUIZ MODAL -->
            <div class="quiz-modal" id="quizModal">
                <div class="quiz-box">
                    <div class="quiz-close" id="quizClose">&times;</div>
                    <h2>Unlock Your Surprise üíù</h2>
                    <p class="quiz-subtitle">Sirf tum hi inka sahi jawab jaanti ho üòâ</p>

                    <div class="quiz-question" id="quizQuestion"></div>

                    <input type="text" id="quizAnswer" placeholder="Yahan answer likho..." autocomplete="off" />

                    <div class="quiz-error" id="quizError"></div>

                    <div class="quiz-footer">
                        <div class="quiz-progress">
                            Question <span id="quizStep">1</span>/<span id="quizTotal">5</span>
                        </div>
                        <button id="quizNext">Submit</button>
                    </div>
                </div>
            </div>

            <!-- GOODBYE MODAL -->
            <div class="goodbye-modal" id="goodbyeModal">
                <div class="goodbye-box">
                    <div class="goodbye-close" id="goodbyeClose">&times;</div>
                    <h2>Really Saying Goodbye? ü•∫</h2>
                    <p>
                        Agar tum chaho toh main yahi ruk jaunga‚Ä¶<br />
                        Par dil se chahta hoon tum pura surprise dekho üíï
                    </p>
                    <div class="goodbye-actions">
                        <button id="goodbyeStay">Okay, I‚Äôll Stay üíñ</button>
                    </div>
                </div>
            </div>

        </div><!-- /#page1 -->

        <!-- =============== PAGE 2 : 3D GALLERY PAGE =============== -->
        <div id="page2" class="page page-gallery">
            <div id="drag-container">
                <div id="spin-container">
                    <!-- apni images yahan daalna -->
                    <img src="./images/r1.png" alt="">
                    <img src="./images/r2.png" alt="">
                    <img src="./images/r3.png" alt="">
                    <img src="./images/r4.png" alt="">
                    <img src="./images/r5.png" alt="">
                    <img src="./images/r6.png" alt="">
                    <img src="./images/r7.png" alt="">
                    <img src="./images/r8.png" alt="">
                    <img src="./images/r9.png" alt="">
                    <img src="./images/r10.png" alt="">

                    <p>Happy <span>Birthday</span> Ritika</p>
                    <button class="button" onclick="confettiBurst()"></button>
                </div>
                <div id="ground"></div>
            </div>

            <div id="music-container"></div>
        </div><!-- /#page2 -->
    </div><!-- /#app -->

    <!-- CONFETTI LIB -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1/dist/confetti.browser.min.js"></script>

    <script>
        // ========== DATE TYPING ==========
        let datetxt = "20th December";
        let charArrDate = datetxt.split('');
        let currentIndex = 0;
        let date__of__birth = document.querySelector(".date__of__birth span");

        if (date__of__birth) {
            setTimeout(function () {
                let timeDatetxt = setInterval(function () {
                    if (currentIndex < charArrDate.length) {
                        date__of__birth.textContent += charArrDate[currentIndex];
                        currentIndex++;
                    } else {
                        let i = document.createElement("i");
                        i.className = "fa-solid fa-star"
                        document.querySelector(".date__of__birth").prepend(i)
                        document.querySelector(".date__of__birth").appendChild(i.cloneNode(true))
                        clearInterval(timeDatetxt)
                    }
                }, 100)
            }, 12000)
        }

        // ========== LOVE LETTER CLOSE ==========
        const boxmail = document.querySelector('.boxMail');
        const mailClose = document.querySelector('.boxMail .fa-xmark');
        if (mailClose && boxmail) {
            mailClose.addEventListener('click', () => {
                boxmail.classList.remove('active');
            });
        }

        // ========== PAGE FLIP ==========
        function goToGallery() {
            const app = document.getElementById('app');
            if (app) {
                app.classList.add('show-gallery');
            }
        }

        // ========== QUIZ LOGIC ==========
        const quizData = [
            {
                question: "Main tumhe pyaar se kaun sa nickname bulaata hoon? üíï",
                answers: ["chanda"]
            },
            {
                question: "Hum pehli baar kis month me properly baat karne lage the? üìÖ",
                answers: ["january", "jan"]
            },
            {
                question: "Tumhara favourite colour jo tumne mujhe bataya tha? üé®",
                answers: ["pink", "baby pink"]
            },
            {
                question: "Hamari sabse yaadgaar jagah kaunsi hai jahan hum gaye the? üìç",
                answers: ["temple", "mandir"]
            },
            {
                question: "Main tumhe sabse zyada kya kehta hoon? (sirf ek word) üòå",
                answers: ["special", "princess"]
            }
        ];

        const btnUnlock = document.getElementById("btnUnlock");
        const quizModal = document.getElementById("quizModal");
        const quizQuestionEl = document.getElementById("quizQuestion");
        const quizAnswerInput = document.getElementById("quizAnswer");
        const quizErrorEl = document.getElementById("quizError");
        const quizStepEl = document.getElementById("quizStep");
        const quizTotalEl = document.getElementById("quizTotal");
        const quizNextBtn = document.getElementById("quizNext");
        const quizCloseBtn = document.getElementById("quizClose");

        let currentQuizIndex = 0;
        if (quizTotalEl) quizTotalEl.textContent = quizData.length;

        function normalise(str) {
            return (str || "").trim().toLowerCase();
        }

        function openQuiz() {
            if (!quizModal) return;
            currentQuizIndex = 0;
            quizModal.classList.add("active");
            loadQuizQuestion();
        }

        function closeQuiz() {
            if (!quizModal) return;
            quizModal.classList.remove("active");
            if (quizErrorEl) quizErrorEl.textContent = "";
            if (quizAnswerInput) quizAnswerInput.value = "";
        }

        function loadQuizQuestion() {
            const current = quizData[currentQuizIndex];
            if (quizQuestionEl) quizQuestionEl.textContent = current.question;
            if (quizStepEl) quizStepEl.textContent = currentQuizIndex + 1;
            if (quizAnswerInput) {
                quizAnswerInput.value = "";
                quizAnswerInput.focus();
            }
            if (quizErrorEl) quizErrorEl.textContent = "";
        }

        function handleCorrectAnswer() {
            if (currentQuizIndex === quizData.length - 1) {
                // LAST QUESTION CORRECT
                closeQuiz();

                if (boxmail) {
                    boxmail.classList.add('active'); // love letter open
                }

                // thodi der letter dikhao, phir gallery pe flip
                setTimeout(function () {
                    if (boxmail) {
                        boxmail.classList.remove('active');
                    }
                    goToGallery();
                }, 8000); // 8 second baad flip
            } else {
                currentQuizIndex++;
                loadQuizQuestion();
            }
        }

        function handleQuizSubmit() {
            if (!quizAnswerInput) return;
            const value = normalise(quizAnswerInput.value);
            if (!value) {
                if (quizErrorEl) quizErrorEl.textContent = "Answer likho na baby üíï";
                return;
            }
            const validAnswers = quizData[currentQuizIndex].answers.map(a => a.toLowerCase());
            const isCorrect = validAnswers.includes(value);

            if (!isCorrect) {
                if (quizErrorEl) quizErrorEl.textContent = "Nahi yeh wala nahi‚Ä¶ thoda aur socho üòú";
                if (quizModal) {
                    quizModal.classList.add("shake");
                    setTimeout(() => quizModal.classList.remove("shake"), 300);
                }
                return;
            }

            handleCorrectAnswer();
        }

        if (btnUnlock) {
            btnUnlock.addEventListener("click", openQuiz);
        }
        if (quizNextBtn) {
            quizNextBtn.addEventListener("click", handleQuizSubmit);
        }
        if (quizAnswerInput) {
            quizAnswerInput.addEventListener("keydown", function (e) {
                if (e.key === "Enter") {
                    handleQuizSubmit();
                }
            });
        }
        if (quizCloseBtn) {
            quizCloseBtn.addEventListener("click", closeQuiz);
        }

        // ========== GOODBYE MODAL ==========
        const btnGoodbye = document.getElementById("btnGoodbye");
        const goodbyeModal = document.getElementById("goodbyeModal");
        const goodbyeClose = document.getElementById("goodbyeClose");
        const goodbyeStay = document.getElementById("goodbyeStay");

        function openGoodbye() {
            if (goodbyeModal) goodbyeModal.classList.add("active");
        }
        function closeGoodbye() {
            if (goodbyeModal) goodbyeModal.classList.remove("active");
        }

        if (btnGoodbye) {
            btnGoodbye.addEventListener("click", openGoodbye);
        }
        if (goodbyeClose) {
            goodbyeClose.addEventListener("click", closeGoodbye);
        }
        if (goodbyeStay) {
            goodbyeStay.addEventListener("click", closeGoodbye);
        }

        // ========== 3D GALLERY JS ==========
        // config
        var radius = 240;        // circle radius
        var autoRotate = true;   // auto rotate
        var rotateSpeed = -60;   // seconds / 360deg
        var imgWidth = 120;      // px
        var imgHeight = 170;     // px
        var bgMusicURL = null;   // set url if you want music
        var bgMusicControls = true;

        setTimeout(init3d, 1000);

        var odrag = document.getElementById('drag-container');
        var ospin = document.getElementById('spin-container');
        var aImg = ospin ? ospin.getElementsByTagName('img') : [];
        var aVid = ospin ? ospin.getElementsByTagName('video') : [];
        var aEle = [...aImg, ...aVid];

        function init3d(delayTime) {
            if (!ospin || !odrag) return;
            ospin.style.width = imgWidth + "px";
            ospin.style.height = imgHeight + "px";

            var ground = document.getElementById('ground');
            if (ground) {
                ground.style.width = radius * 3 + "px";
                ground.style.height = radius * 3 + "px";
            }

            for (var i = 0; i < aEle.length; i++) {
                aEle[i].style.transform = "rotateY(" + (i * (360 / aEle.length)) + "deg) translateZ(" + radius + "px)";
                aEle[i].style.transition = "transform 1s";
                aEle[i].style.transitionDelay = delayTime || (aEle.length - i) / 4 + "s";
            }

            // auto spin
            if (autoRotate) {
                var animationName = (rotateSpeed > 0 ? 'spin' : 'spinRevert');
                ospin.style.animation = animationName + " " + Math.abs(rotateSpeed) + "s infinite linear";
            }

            // music
            if (bgMusicURL) {
                var mc = document.getElementById('music-container');
                if (mc) {
                    mc.innerHTML = '<audio src="' + bgMusicURL + '" ' + (bgMusicControls ? 'controls' : '') + ' autoplay loop></audio>';
                }
            }
        }

        var desX = 0, desY = 0, tX = 0, tY = 10;

        function applyTranform(obj) {
            if (tY > 180) tY = 180;
            if (tY < 0) tY = 0;
            obj.style.transform = "rotateX(" + (-tY) + "deg) rotateY(" + (tX) + "deg)";
        }

        function playSpin(yes) {
            if (!ospin) return;
            ospin.style.animationPlayState = (yes ? 'running' : 'paused');
        }

        document.onpointerdown = function (e) {
            if (!odrag) return;
            clearInterval(odrag.timer);
            e = e || window.event;
            var sX = e.clientX,
                sY = e.clientY;

            this.onpointermove = function (e) {
                e = e || window.event;
                var nX = e.clientX,
                    nY = e.clientY;
                desX = nX - sX;
                desY = nY - sY;
                tX += desX * 0.1;
                tY += desY * 0.1;
                applyTranform(odrag);
                sX = nX;
                sY = nY;
            };

            this.onpointerup = function (e) {
                odrag.timer = setInterval(function () {
                    desX *= 0.95;
                    desY *= 0.95;
                    tX += desX * 0.1;
                    tY += desY * 0.1;
                    applyTranform(odrag);
                    playSpin(false);
                    if (Math.abs(desX) < 0.5 && Math.abs(desY) < 0.5) {
                        clearInterval(odrag.timer);
                        playSpin(true);
                    }
                }, 17);
                this.onpointermove = this.onpointerup = null;
            };

            return false;
        };

        document.onmousewheel = function (e) {
            e = e || window.event;
            var d = e.wheelDelta / 20 || -e.detail;
            radius += d;
            init3d(1);
        };

        // ========== CONFETTI ==========
        function confettiBurst() {
            if (window.confetti) {
                confetti({
                    particleCount: 120,
                    spread: 80,
                    origin: { y: 0.6 }
                });
            }
        }
        window.confettiBurst = confettiBurst;
    </script>
</body>

</html>

